# Stocks

Обработка данных о финансовых сделках. Для запуска этого графа необходимо иметь токен от песочницы [Tinkoff API](https://tinkoff.github.io/investAPI/token/).

## Запуск

Запуск примера осуществляется в два шага:
* запуск модели кластера командой `docker compose up -d`;
* сборка и запуск графа обработки данных командой `./run.sh`; в скрипте `run.sh` собраны действия, которые пользователь может делать вручную через CLI.

## Остановка

При запущенном графе остановка осуществляется в два шага:
* остановка графа обработки данных командой `_build/gostreaming 127.0.0.1:5555 schemas stop -n stocks`;
* остановка кластера командой `docker compose down`.

## Использование

Для изменения конфигурации отслеживаемого портфеля используется консольное приложение `tcs-account`. С помощью команд `add` и `rm` можно менять количество и виды акций в портфеле. Команда `list` служит для отображения текущей конфигурации портфеля. Более подробное описание можно получить с помощью команды `_build/tcs-account --help`.

После того, как портфель сконфигурирован можно перейти в интерфейс Grafana по адресу `http://127.0.0.1:3000/`. Имя пользователя и пароль по умолчанию `admin:admin`. После этого можно воспользоваться заранее загруженными графиками по адресу `http://127.0.0.1:3000/d/44FTbrFVk/example-stocks?orgId=1&from=now-30m&to=now` или создать свои.
